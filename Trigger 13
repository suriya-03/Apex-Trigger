Trigger Scenario : "ğ–ğ¡ğğ§ ğ­ğ¡ğ ğ’ğ­ğšğ ğğğšğ¦ğ ğ¨ğ§ ğğ©ğ©ğ¨ğ«ğ­ğ®ğ§ğ¢ğ­ğ² 'ğ‚ğ¥ğ¨ğ¬ğğ ğ–ğ¨ğ§â€™ ğ­ğ¡ğğ§ ğœğ¡ğğœğ¤ ğ¢ğŸ ğ€ğœğœğ¨ğ®ğ§ğ­'ğ¬ ğ€ğœğ­ğ¢ğ¯ğ = 'ğğ¨' ğšğ§ğ ğğ°ğ§ğğ«ğ¬ğ¡ğ¢ğ© = 'ğğ«ğ¢ğ¯ğšğ­ğ'. ğšğ›ğ¨ğ¯ğ ğœğ¨ğ§ğğ¢ğ­ğ¢ğ¨ğ§ğ¬ ğšğ«ğ ğ­ğ«ğ®ğ ğ­ğ¡ğğ§ ğ­ğ¡ğ«ğ¨ğ° ğšğ§ ğğ«ğ«ğ¨ğ« ğ°ğ¢ğ­ğ¡ ğ¦ğğ¬ğ¬ğšğ ğ -> 
"ğğ©ğ©ğ¨ğ«ğ­ğ®ğ§ğ¢ğ­ğ² ğœğšğ§ğ§ğ¨ğ­ ğ›ğ ğ®ğ©ğğšğ­ğğ ğ­ğ¨ ğ‚ğ¥ğ¨ğ¬ğğ ğ–ğ¨ğ§ ğŸğ¨ğ« ğˆğ§ğšğœğ­ğ¢ğ¯ğ ğ€ğœğœğ¨ğ®ğ§ğ­" ğŸğ¨ğ« ğ›ğ¨ğ­ğ¡ ğ¢ğ§ğ¬ğğ«ğ­ğ¢ğ¨ğ§ ğšğ§ğ ğ®ğ©ğğšğ­ğ¢on

Trigger on :Opportunity
Event : Before
DML : Not Required


trigger OpportunityTrigger on Opportunity (before Insert,before update) 
{
opportunityHandler obj = new opportunityHandler();
  obj.doAction();
}



public class opportunityHandler
{
  List<Opportunity> triggerold;
  List<Opportunity> triggerNew;
  Map<Id,Opportunity> triggerOldMap;
  Map<Id,Opportunity> triggerNewMap;
  
public OpportunityHandler()
  {
    triggerOld = (List<Opportunity>) Trigger.Old;
      triggerNew= (List<Opportunity>) Trigger.New;
      triggerOldMap = (Map<Id,Opportunity>) Trigger.OldMap;
      triggerNewMap = (Map<Id,Opportunity>) Trigger.NewMap;
  }
  
  public void doAction()
  {
      SWITCH ON Trigger.OperationType
      {
          WHEN BEFORE_INSERT
          {
              opportunityValidation(TriggerNew);
          }
          WHEN BEFORE_UPDATE
          {
              opportunityValidation(TriggerNew);  
          }
      }
  }
    public void opportunityValidation(List<opportunity> oppList)
  {
      Set<Id> accountIds = new Set<Id> ();
      
      for(opportunity opp3 : oppList)
      {
          if(opp3.accountId != NULL && (opp3.StageName == 'Closed Won'))
          {
             accountIds.add(opp3.accountId);
          }
      }
      
      system.debug(accountIds);
        List<Account> accList = [SELECT Id, Active__c, Ownership FROM Account WHERE Id IN :accountIds];
      System.debug(accList);

      // Create a map to check Account status
      Map<Id, Account> accountMap = new Map<Id, Account>(accList);

      for (Opportunity opp : oppList) {
          if (opp.AccountId != null && opp.StageName == 'Closed Won') {
              Account relatedAccount = accountMap.get(opp.AccountId);
              if (relatedAccount != null && relatedAccount.Active__c == 'No' && relatedAccount.Ownership == 'Private') {
                  opp.addError('Error: Opportunities cannot be Closed Won for inactive private accounts.');
              }
          }
      }

  }
}
